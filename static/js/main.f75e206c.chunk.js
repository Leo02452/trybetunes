(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{30:function(e,t,a){},33:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(22),s=a.n(c),i=(a(30),a(3)),o=a(4),l=a(6),u=a(5),d=a(8),j=a(2),b=a.n(j),h=a(7),m=a(14),p="user",f=function(e){return localStorage.setItem(p,JSON.stringify(e))},O=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},v=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(p));null===t&&(t={}),O(t)(e)}))},x=function(e){return new Promise((function(t){f(Object(m.a)(Object(m.a)({},{name:"",email:"",image:"",description:""}),e)),O("OK")(t)}))},g=function(e){return new Promise((function(t){f(Object(m.a)({},e)),O("OK")(t)}))},k=a(0),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(k.jsx)("span",{className:"loading",children:"Loading..."})}}]),a}(n.Component),S=N,w=(a(33),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target;e.setState({name:a.value},(function(){var t=e.state.name;e.setState({isButtonDisabled:3>t.length})}))},e.handleLogin=function(){var t=Object(h.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state.name,e.setState({loading:!0}),t.next=5,x({name:n});case 5:e.setState({loading:!1,login:!0});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={name:"",isButtonDisabled:!0,loading:!1,login:!1},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isButtonDisabled,a=e.loading,n=e.login;return Object(k.jsxs)("div",{"data-testid":"page-login",children:[a?Object(k.jsx)(S,{}):Object(k.jsxs)("form",{className:"login-form",children:[Object(k.jsx)("input",{"data-testid":"login-name-input",name:"name",className:"login-input",placeholder:"Enter your username",onChange:this.handleChange}),Object(k.jsx)("button",{"data-testid":"login-submit-button",type:"submit",className:"login-button",disabled:t,onClick:this.handleLogin,children:"Enter"})]}),n&&Object(k.jsx)(d.a,{to:"/search"})]})}}]),a}(n.Component)),C=w,y=a(11),I=(a(42),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(k.jsx)("footer",{className:"footer-container",children:Object(k.jsx)("span",{className:"footer-title",children:"Desenvolvido por Leo Araujo com React e muita paci\xeancia."})})}}]),a}(n.Component)),F=I,U=(a(43),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).fetchUser=Object(h.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,v();case 3:a=t.sent,e.setState({loading:!1,userName:a.name});case 5:case"end":return t.stop()}}),t)}))),e.componentDidMount=Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchUser();case 2:case"end":return t.stop()}}),t)}))),e.state={loading:!0,userName:""},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.userName;return Object(k.jsxs)("header",{"data-testid":"header-component",className:"header-container",children:[t?Object(k.jsx)(S,{}):Object(k.jsx)("span",{"data-testid":"header-user-name",className:"user-name",children:a}),Object(k.jsxs)("nav",{className:"nav-container",children:[Object(k.jsx)(y.b,{to:"/search","data-testid":"link-to-search",className:"nav-link",children:"Search"}),Object(k.jsx)(y.b,{to:"/favorites","data-testid":"link-to-favorites",className:"nav-link",children:"Favorites"}),Object(k.jsx)(y.b,{to:"/profile","data-testid":"link-to-profile",className:"nav-link",children:"Profile"})]})]})}}]),a}(n.Component)),D=function(){var e=Object(h.a)(b.a.mark((function e(t){var a,n,r,c,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURI(t).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,s=c.results,i=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=D,A=(a(44),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target;e.setState({artist:a.value},(function(){var t=e.state.artist;e.setState({isButtonDisabled:2>t.length})}))},e.handleSearch=Object(h.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),a=e.state.artist,t.next=4,L(a);case 4:n=t.sent,e.setState({loading:!1,fetchAlbum:!0,albums:n,searchedArtist:a}),e.setState({artist:""});case 7:case"end":return t.stop()}}),t)}))),e.state={artist:"",searchedArtist:"",isButtonDisabled:!0,loading:!1,fetchAlbum:!1,albums:[]},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.artist,a=e.isButtonDisabled,n=e.loading,r=e.fetchAlbum,c=e.albums,s=e.searchedArtist;return Object(k.jsxs)("div",{"data-testid":"page-search",children:[Object(k.jsx)(U,{}),n?Object(k.jsx)(S,{}):Object(k.jsxs)("form",{className:"search-artist-form",children:[Object(k.jsx)("input",{type:"text","data-testid":"search-artist-input",name:"search-artist-input",placeholder:"Search an artist",className:"search-artist-input",value:t,onChange:this.handleChange}),Object(k.jsx)("button",{type:"button","data-testid":"search-artist-button",className:"search-artist-button",disabled:a,onClick:this.handleSearch,children:"Search"})]}),r&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("span",{className:"search-result-title",children:["Found albuns of:"," ",s]}),Object(k.jsx)("section",{className:"albuns-container",children:0===c.length?"Nenhum \xe1lbum foi encontrado":c.map((function(e){return Object(k.jsxs)(y.b,{"data-testid":"link-to-album-".concat(e.collectionId),to:"/album/".concat(e.collectionId),className:"album-card",children:[Object(k.jsx)("img",{src:e.artworkUrl100,alt:"album ".concat(e.collectionName)}),Object(k.jsx)("span",{children:e.collectionName})]},e.collectionId)}))})]}),Object(k.jsx)(F,{})]})}}]),a}(n.Component)),B=function(){var e=Object(h.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=B,E=a(21),J=a(25),M="favorite_songs";JSON.parse(localStorage.getItem(M))||localStorage.setItem(M,JSON.stringify([]));var K=function(){return JSON.parse(localStorage.getItem(M))},R=function(e){return localStorage.setItem(M,JSON.stringify(e))},T=function(e){return function(t){setTimeout((function(){t(e)}),500)}},V=function(){return new Promise((function(e){var t=K();T(t)(e)}))},W=function(e){return new Promise((function(t){if(e){var a=K();R([].concat(Object(J.a)(a),[e]))}T("OK")(t)}))},_=function(e){return new Promise((function(t){var a=K();R(a.filter((function(t){return t.trackId!==e.trackId}))),T("OK")(t)}))},q=(a(45),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(h.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.trackId,n.setState({loading:!0}),e.next=4,V();case 4:a=e.sent,n.setState({loading:!1,favoritesSongsList:a},(function(){return n.isFavoriteSong(t)}));case 6:case"end":return e.stop()}}),e)}))),n.handleCheck=function(){var e=Object(h.a)(b.a.mark((function e(t){var a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,r=n.state.trackInfo,c=n.props.onFavoriteChange,n.setState({loading:!0}),!a.checked){e.next=10;break}return n.setState({isFavorite:!0}),e.next=8,W(r);case 8:e.next=13;break;case 10:return n.setState({isFavorite:!1}),e.next=13,_(r);case 13:n.setState({loading:!1}),c();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.isFavoriteSong=function(e){var t=n.state.favoritesSongsList;n.setState({isFavorite:t.some((function(t){return t.trackId===e}))})},n.state={loading:!1,trackInfo:e.trackInfo,favoritesSongsList:[],isFavorite:!1},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.trackName,a=e.previewUrl,n=e.trackId,r=this.state,c=r.loading,s=r.isFavorite;return Object(k.jsxs)("div",{className:"music-card",children:[Object(k.jsx)("h3",{children:t}),Object(k.jsxs)("div",{className:"music",children:[Object(k.jsxs)("audio",{"data-testid":"audio-component",src:a,controls:!0,children:[Object(k.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(k.jsx)("code",{children:"audio"})]}),Object(k.jsxs)("label",{htmlFor:n,children:[s?Object(k.jsx)(E.b,{className:"fav-icon"}):Object(k.jsx)(E.a,{className:"fav-icon"}),c&&Object(k.jsx)(S,{}),Object(k.jsx)("input",{"data-testid":"checkbox-music-".concat(n),type:"checkbox",name:"checkbox-music-".concat(n),id:n,className:"checkbox-input",checked:s,onChange:this.handleCheck})]})]})]})}}]),a}(n.Component));q.defaultProps={onFavoriteChange:function(){}};var z=q,G=(a(46),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).componentDidMount=Object(h.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,P(a);case 3:n=t.sent,e.setState({loading:!1,tracks:n});case 5:case"end":return t.stop()}}),t)}))),e.state={loading:!0,tracks:[]},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.tracks,a=e.loading;return Object(k.jsxs)("div",{"data-testid":"page-album",children:[Object(k.jsx)(U,{}),a?Object(k.jsx)(S,{}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("section",{className:"artist-album-info",children:[Object(k.jsx)("span",{"data-testid":"artist-name",children:t[0].artistName}),Object(k.jsx)("span",{"data-testid":"album-name",children:t[0].collectionName})]}),Object(k.jsx)("section",{className:"music-container",children:t.map((function(e,t){return t>0&&Object(k.jsx)(z,{trackName:e.trackName,previewUrl:e.previewUrl,trackId:e.trackId,trackInfo:e},e.trackId)}))})]}),Object(k.jsx)(F,{})]})}}]),a}(n.Component)),H=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.handleUpdate()},n.handleUpdate=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),e.next=3,V();case 3:t=e.sent,n.setState({loading:!1,favoritesSongsList:t});case 5:case"end":return e.stop()}}),e)}))),n.state={loading:!1,favoritesSongsList:[]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.favoritesSongsList;return Object(k.jsxs)("div",{"data-testid":"page-favorites",children:[Object(k.jsx)(U,{}),a?Object(k.jsx)(S,{}):Object(k.jsx)("section",{className:"music-container",children:n.map((function(t){return Object(k.jsx)(z,{trackName:t.trackName,previewUrl:t.previewUrl,trackId:t.trackId,trackInfo:t,onFavoriteChange:e.handleUpdate},t.trackId)}))}),Object(k.jsx)(F,{})]})}}]),a}(n.Component),Q=(a(47),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).componentDidMount=Object(h.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,v();case 3:a=t.sent,e.setState({user:a,loading:!1});case 5:case"end":return t.stop()}}),t)}))),e.state={user:{},loading:!1},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.user,a=e.loading;return Object(k.jsxs)("div",{"data-testid":"page-profile",children:[Object(k.jsx)(U,{}),a?Object(k.jsx)(S,{}):Object(k.jsxs)("section",{className:"user-container",children:[Object(k.jsx)("div",{className:"user-image",children:Object(k.jsx)("img",{src:t.image,"data-testid":"profile-image",alt:"Foto de ".concat(t.name)})}),Object(k.jsxs)("div",{className:"user-info",children:[Object(k.jsx)("h4",{children:"Name"}),Object(k.jsx)("span",{children:t.name}),Object(k.jsx)("h4",{children:"Email"}),Object(k.jsx)("span",{children:t.email}),Object(k.jsx)("h4",{children:"About"}),Object(k.jsx)("span",{children:t.description}),Object(k.jsx)(y.b,{to:"/profile/edit",className:"edit-profile-link",children:"Edit profile"})]})]}),Object(k.jsx)(F,{})]})}}]),a}(n.Component)),X=a(17),Y=(a(48),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).componentDidMount=Object(h.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,v();case 3:a=t.sent,e.setState({user:a,loading:!1}),e.handleVerification();case 6:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){var a=t.target;e.setState((function(e){return{user:Object(m.a)(Object(m.a)({},e.user),{},Object(X.a)({},a.name,a.value))}}),e.handleVerification)},e.handleVerification=function(){var t=e.state.user,a=t.name.length<=0,n=t.email.length<=0,r=t.description.length<=0,c=t.image.length<=0;e.setState({isButtonEnabled:!a&&!n&&!r&&!c})},e.handleClick=function(t){t.preventDefault();var a=e.state.user;e.setState({loading:!0},Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(a);case 2:e.setState({isUpdated:!0,loading:!1});case 3:case"end":return t.stop()}}),t)}))))},e.state={user:{},loading:!1,isButtonEnabled:!1,isUpdated:!1},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.user,n=e.isButtonEnabled,r=e.isUpdated;return Object(k.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(k.jsx)(U,{}),Object(k.jsx)("div",{children:t?Object(k.jsx)(S,{}):Object(k.jsxs)("form",{className:"edit-profile-form",children:[Object(k.jsxs)("label",{htmlFor:"name",className:"edit-profile-label",children:["Name",Object(k.jsx)("input",{"data-testid":"edit-input-name",name:"name",className:"edit-profile-input",onChange:this.handleChange,value:a.name})]}),Object(k.jsxs)("label",{htmlFor:"email",className:"edit-profile-label",children:["Email",Object(k.jsx)("input",{"data-testid":"edit-input-email",name:"email",className:"edit-profile-input",onChange:this.handleChange,value:a.email})]}),Object(k.jsxs)("label",{htmlFor:"description",className:"edit-profile-label",children:["About",Object(k.jsx)("input",{"data-testid":"edit-input-description",name:"description",className:"edit-profile-input",onChange:this.handleChange,value:a.description})]}),Object(k.jsxs)("label",{htmlFor:"image",className:"edit-profile-label",children:["URL to image",Object(k.jsx)("input",{"data-testid":"edit-input-image",name:"image",className:"edit-profile-input",onChange:this.handleChange,value:a.image})]}),Object(k.jsx)("button",{type:"submit","data-testid":"edit-button-save",className:"edit-button-save",disabled:!n,onClick:this.handleClick,children:"Update"})]})}),Object(k.jsx)(F,{}),r&&Object(k.jsx)(d.a,{to:"/profile"})]})}}]),a}(n.Component)),Z=(a(49),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(k.jsxs)("section",{"data-testid":"page-not-found",className:"not-found-container",children:[Object(k.jsx)("h1",{className:"not-found-error",children:"404"}),Object(k.jsx)("h2",{className:"not-found-title",children:"Not Found"}),Object(k.jsx)("p",{className:"not-found-message",children:"Woops. Looks like this page does not exist."})]})}}]),a}(n.Component)),$=Z,ee=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(k.jsx)("main",{children:Object(k.jsxs)(d.d,{children:[Object(k.jsx)(d.b,{path:"/search",component:A}),Object(k.jsx)(d.b,{path:"/album/:id",component:G}),Object(k.jsx)(d.b,{path:"/favorites",component:H}),Object(k.jsx)(d.b,{path:"/profile/edit",component:Y}),Object(k.jsx)(d.b,{path:"/profile",component:Q}),Object(k.jsx)(d.b,{path:"/",component:C,exact:!0}),Object(k.jsx)(d.b,{path:"/*",component:$})]})})}}]),a}(r.a.Component),te=ee;s.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(y.a,{children:Object(k.jsx)(te,{})})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.f75e206c.chunk.js.map